# 交流学級教師マッピング問題の解決策

## 問題の概要
交流学級（6組、7組）には教師マッピングが存在しないため、システムが「国担当」「社担当」などの汎用教師を生成し、教師重複制約違反を引き起こしています。

## 根本原因
1. `teacher_subject_mapping.csv`に交流学級（6組、7組）の教師割り当てがない
2. CSVリーダーがフォールバック処理で汎用教師を生成
3. 同じ汎用教師が複数クラスに割り当てられ重複違反となる

## 解決策

### 短期的解決（実装済み）
CSVリーダーで交流学級専用の教師名を生成：
```python
if class_ref.class_number in [6, 7]:
    return Teacher(f"{subject_name}_{class_ref}")
```

### 推奨される長期的解決
`teacher_subject_mapping.csv`に交流学級の教師割り当てを追加：

```csv
# 1年6組（親学級：1年1組）
寺田,国,1,6
蒲地,社,1,6
梶永,数,1,6
金子ひ,理,1,6
塚本,音,1,6
青井,美,1,6
野口,保,1,6
藤井,技,1,6
吉良,家,1,6
井上,英,1,6

# 1年7組（親学級：1年2組）
寺田,国,1,7
北,社,1,7
梶永,数,1,7
金子ひ,理,1,7
塚本,音,1,7
青井,美,1,7
野口,保,1,7
藤井,技,1,7
吉良,家,1,7
井上,英,1,7

# 同様に2年6組、2年7組、3年6組、3年7組も追加
```

## 効果
- 教師重複制約違反が大幅に減少
- 交流学級の教師配置が適切に管理される
- システムの一貫性が向上

## 実装の優先順位
1. 火曜5限の井上先生問題 → 解決済み✓
2. 交流学級教師マッピング → 対応中
3. 日内重複制約 → 次の課題
4. 空きコマ埋め → 最終調整